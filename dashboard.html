<!DOCTYPE html>
<html>
<head>
<title>Manager Dashboard</title>

<style>
body{font-family:Arial;background:#f4f6f9;text-align:center}
table{
margin:auto;
border-collapse:collapse;
width:80%;
background:white;
}
th,td{
padding:12px;
border:1px solid #ddd;
}
th{background:#2d89ef;color:white;}
h1{margin-top:30px;}
</style>
</head>

<body style="background:url('pigeon.jpeg'); background-size:cover;">


<h1>Manager Monitoring Dashboard</h1>

<h2>Feeding Logs</h2>
<table id="feedTable">
<tr>
<th>Worker</th>
<th>Pigeon ID</th>
<th>Amount</th>
<th>Time</th>
</tr>
</table>

<br><br>

<h2>Health Reports</h2>
<table id="healthTable">
<tr>
<th>Worker</th>
<th>Pigeon</th>
<th>Issue</th>
<th>Time</th>
</tr>
</table>

<script>

const API="http://localhost:3000";

function loadData(){

fetch(API+"/feed-logs")
.then(res=>res.json())
.then(data=>{
let table=document.getElementById("feedTable");
table.innerHTML=`<tr>
<th>Worker</th>
<th>Pigeon ID</th>
<th>Amount Fed (grams)</th>
<th>Time</th>
</tr>`;

data.forEach(row=>{
table.innerHTML+=`
<tr>${row.name}</td>
<td>${row.pigeonId}</td>
<td>${row.amount}</td>
<td>${row.time}</td>
</tr>`;
});
});


fetch(API+"/health-reports")
.then(res=>res.json())
.then(data=>{
let table=document.getElementById("healthTable");
table.innerHTML=`<tr>
<th>Worker</th>
<th>Pigeon</th>
<th>Issue</th>
<th>Time</th>
</tr>`;

data.forEach(row=>{
table.innerHTML+=`
<tr>
<td>${row.worker}</td>
<td>${row.pigeon_id}</td>
<td>${row.issue}</td>
<td>${row.time}</td>
</tr>`;
});
});
}

loadData();
setInterval(loadData,5000);

</script>


</body>
</html>
