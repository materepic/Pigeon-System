<!DOCTYPE html>
<html>
<head><title>Login</title></head>
<body>
<h2>Login</h2>

<input id="username" placeholder="username"><br><br>
<input id="password" placeholder="password" type="password"><br><br>
<button onclick="login()">LOGIN</button>

<script>
const API = ""; // SAME ORIGIN (works on Render + phone)

async function login(){
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  const res = await fetch(API + "/login",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({ username, password }),
    credentials: "include"
  });

  const data = await res.json();

  if(data.status==="ok"){
    if(data.role === "manager"){
      window.location = "/manager";
      return;
    }
    alert("Worker login success: " + data.name);
  } else {
    alert("Login failed");
  }
}
</script>
</body>
</html>
